version: 2.1

orbs:
  codecov: codecov/codecov@3.2.2

jobs:
  build:
    docker:
    - image: cimg/node:16.16
    steps:
    - checkout
    - run:
        name: Start Pipeline
        command: |
          echo 'Starting pipeline'
    - run:
        name: Install dependencies
        command: npm install

    - run:
        name: Run Tests
        command: npm run test

    - run:
        name: Generate code coverage
        command: npm run cover

    - codecov/upload